{"ast":null,"code":"// src/alerts/setupLogger.ts\n\n// In-memory log storage (replace with persistent storage if needed)\nlet setupLog = [];\n\n/**\r\n * Log a new ICC setup into the system.\r\n */\nexport const logSetup = setup => {\n  setupLog.push(setup);\n};\n\n/**\r\n * Retrieve all logged setups.\r\n */\nexport const getSetupLog = () => {\n  return setupLog;\n};\n\n/**\r\n * Clear all logged setups (optional utility).\r\n */\nexport const clearSetupLog = () => {\n  setupLog = [];\n};\n\n/**\r\n * Export setups to CSV format.\r\n * Includes all ICC fields: symbol, timeframe, iccTags, priceAtTrigger, outcome, timeBlock, bot, dashboard.\r\n */\nexport const exportSetupLogCSV = (entries = setupLog) => {\n  const headers = ['Symbol', 'Timeframe', 'ICC Tags', 'PriceAtTrigger', 'Outcome', 'TimeBlock', 'Bot', 'Dashboard'];\n  const rows = entries.map(setup => {\n    var _setup$bot;\n    return [setup.symbol, setup.timeframe, setup.iccTags.join('|'),\n    // join tags with pipe for clarity\n    setup.priceAtTrigger, setup.outcome, setup.timeBlock, (_setup$bot = setup.bot) !== null && _setup$bot !== void 0 ? _setup$bot : '', setup.dashboard];\n  });\n  const csvContent = [headers, ...rows].map(row => row.map(field => `\"${String(field)}\"`).join(',')).join('\\n');\n  return csvContent;\n};\n\n/**\r\n * Export setups to JSON format.\r\n * Useful for bot ingestion or external audit pipelines.\r\n */\nexport const exportSetupLogJSON = (entries = setupLog) => {\n  return JSON.stringify(entries, null, 2);\n};","map":{"version":3,"names":["setupLog","logSetup","setup","push","getSetupLog","clearSetupLog","exportSetupLogCSV","entries","headers","rows","map","_setup$bot","symbol","timeframe","iccTags","join","priceAtTrigger","outcome","timeBlock","bot","dashboard","csvContent","row","field","String","exportSetupLogJSON","JSON","stringify"],"sources":["C:/Users/irajc/charting-platform/src/alerts/setupLogger.ts"],"sourcesContent":["// src/alerts/setupLogger.ts\r\nimport type { ICCSetup } from '../types/ICC';\r\n\r\n// In-memory log storage (replace with persistent storage if needed)\r\nlet setupLog: ICCSetup[] = [];\r\n\r\n/**\r\n * Log a new ICC setup into the system.\r\n */\r\nexport const logSetup = (setup: ICCSetup): void => {\r\n  setupLog.push(setup);\r\n};\r\n\r\n/**\r\n * Retrieve all logged setups.\r\n */\r\nexport const getSetupLog = (): ICCSetup[] => {\r\n  return setupLog;\r\n};\r\n\r\n/**\r\n * Clear all logged setups (optional utility).\r\n */\r\nexport const clearSetupLog = (): void => {\r\n  setupLog = [];\r\n};\r\n\r\n/**\r\n * Export setups to CSV format.\r\n * Includes all ICC fields: symbol, timeframe, iccTags, priceAtTrigger, outcome, timeBlock, bot, dashboard.\r\n */\r\nexport const exportSetupLogCSV = (entries: ICCSetup[] = setupLog): string => {\r\n  const headers = [\r\n    'Symbol',\r\n    'Timeframe',\r\n    'ICC Tags',\r\n    'PriceAtTrigger',\r\n    'Outcome',\r\n    'TimeBlock',\r\n    'Bot',\r\n    'Dashboard',\r\n  ];\r\n\r\n  const rows = entries.map(setup => [\r\n    setup.symbol,\r\n    setup.timeframe,\r\n    setup.iccTags.join('|'), // join tags with pipe for clarity\r\n    setup.priceAtTrigger,\r\n    setup.outcome,\r\n    setup.timeBlock,\r\n    setup.bot ?? '',\r\n    setup.dashboard,\r\n  ]);\r\n\r\n  const csvContent = [headers, ...rows]\r\n    .map(row => row.map(field => `\"${String(field)}\"`).join(','))\r\n    .join('\\n');\r\n\r\n  return csvContent;\r\n};\r\n\r\n/**\r\n * Export setups to JSON format.\r\n * Useful for bot ingestion or external audit pipelines.\r\n */\r\nexport const exportSetupLogJSON = (entries: ICCSetup[] = setupLog): string => {\r\n  return JSON.stringify(entries, null, 2);\r\n};\r\n"],"mappings":"AAAA;;AAGA;AACA,IAAIA,QAAoB,GAAG,EAAE;;AAE7B;AACA;AACA;AACA,OAAO,MAAMC,QAAQ,GAAIC,KAAe,IAAW;EACjDF,QAAQ,CAACG,IAAI,CAACD,KAAK,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAME,WAAW,GAAGA,CAAA,KAAkB;EAC3C,OAAOJ,QAAQ;AACjB,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMK,aAAa,GAAGA,CAAA,KAAY;EACvCL,QAAQ,GAAG,EAAE;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMM,iBAAiB,GAAGA,CAACC,OAAmB,GAAGP,QAAQ,KAAa;EAC3E,MAAMQ,OAAO,GAAG,CACd,QAAQ,EACR,WAAW,EACX,UAAU,EACV,gBAAgB,EAChB,SAAS,EACT,WAAW,EACX,KAAK,EACL,WAAW,CACZ;EAED,MAAMC,IAAI,GAAGF,OAAO,CAACG,GAAG,CAACR,KAAK;IAAA,IAAAS,UAAA;IAAA,OAAI,CAChCT,KAAK,CAACU,MAAM,EACZV,KAAK,CAACW,SAAS,EACfX,KAAK,CAACY,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;IAAE;IACzBb,KAAK,CAACc,cAAc,EACpBd,KAAK,CAACe,OAAO,EACbf,KAAK,CAACgB,SAAS,GAAAP,UAAA,GACfT,KAAK,CAACiB,GAAG,cAAAR,UAAA,cAAAA,UAAA,GAAI,EAAE,EACfT,KAAK,CAACkB,SAAS,CAChB;EAAA,EAAC;EAEF,MAAMC,UAAU,GAAG,CAACb,OAAO,EAAE,GAAGC,IAAI,CAAC,CAClCC,GAAG,CAACY,GAAG,IAAIA,GAAG,CAACZ,GAAG,CAACa,KAAK,IAAI,IAAIC,MAAM,CAACD,KAAK,CAAC,GAAG,CAAC,CAACR,IAAI,CAAC,GAAG,CAAC,CAAC,CAC5DA,IAAI,CAAC,IAAI,CAAC;EAEb,OAAOM,UAAU;AACnB,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMI,kBAAkB,GAAGA,CAAClB,OAAmB,GAAGP,QAAQ,KAAa;EAC5E,OAAO0B,IAAI,CAACC,SAAS,CAACpB,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AACzC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}