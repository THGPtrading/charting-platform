{"ast":null,"code":"// src/utils/ICCSetupHandler.ts\n// Utility functions for handling ICC setups across dashboards\n\n/**\r\n * Normalize a raw setup object into a valid ICCSetup.\r\n * Ensures required fields exist and applies defaults.\r\n */\nexport function normalizeSetup(raw) {\n  var _raw$id, _raw$symbol$toUpperCa, _raw$symbol, _raw$tag, _raw$timeBlock, _raw$score, _raw$malformed;\n  return {\n    id: (_raw$id = raw.id) !== null && _raw$id !== void 0 ? _raw$id : crypto.randomUUID(),\n    symbol: (_raw$symbol$toUpperCa = (_raw$symbol = raw.symbol) === null || _raw$symbol === void 0 ? void 0 : _raw$symbol.toUpperCase()) !== null && _raw$symbol$toUpperCa !== void 0 ? _raw$symbol$toUpperCa : \"UNKNOWN\",\n    tag: (_raw$tag = raw.tag) !== null && _raw$tag !== void 0 ? _raw$tag : \"untagged\",\n    timeBlock: (_raw$timeBlock = raw.timeBlock) !== null && _raw$timeBlock !== void 0 ? _raw$timeBlock : \"regular\",\n    score: (_raw$score = raw.score) !== null && _raw$score !== void 0 ? _raw$score : 0,\n    malformed: (_raw$malformed = raw.malformed) !== null && _raw$malformed !== void 0 ? _raw$malformed : false\n  };\n}\n\n/**\r\n * Validate a setup object.\r\n * Returns true if required fields are present and not malformed.\r\n */\nexport function validateSetup(setup) {\n  if (!setup.symbol || !setup.tag || !setup.timeBlock) return false;\n  if (setup.malformed) return false;\n  return true;\n}\n\n/**\r\n * Group setups by tag for dashboard segmentation.\r\n */\nexport function groupByTag(setups) {\n  return setups.reduce((acc, setup) => {\n    const tag = setup.tag;\n    if (!acc[tag]) acc[tag] = [];\n    acc[tag].push(setup);\n    return acc;\n  }, {});\n}\n\n/**\r\n * Group setups by timeBlock for session segmentation.\r\n */\nexport function groupByTimeBlock(setups) {\n  return setups.reduce((acc, setup) => {\n    const block = setup.timeBlock;\n    if (!acc[block]) acc[block] = [];\n    acc[block].push(setup);\n    return acc;\n  }, {});\n}\n\n/**\r\n * Filter setups for malformed entries.\r\n */\nexport function filterMalformed(setups) {\n  return setups.filter(s => s.malformed);\n}\n\n/**\r\n * Example: route setups to dashboards by tag.\r\n */\nexport function routeToDashboard(setup) {\n  switch (setup.tag.toLowerCase()) {\n    case \"momentum\":\n      return \"MomentumEdge\";\n    case \"trend\":\n      return \"TrendEdge\";\n    case \"warrior\":\n      return \"WarriorEdge\";\n    default:\n      return \"DefaultDashboard\";\n  }\n}","map":{"version":3,"names":["normalizeSetup","raw","_raw$id","_raw$symbol$toUpperCa","_raw$symbol","_raw$tag","_raw$timeBlock","_raw$score","_raw$malformed","id","crypto","randomUUID","symbol","toUpperCase","tag","timeBlock","score","malformed","validateSetup","setup","groupByTag","setups","reduce","acc","push","groupByTimeBlock","block","filterMalformed","filter","s","routeToDashboard","toLowerCase"],"sources":["C:/Users/irajc/charting-platform/src/utils/ICCSetupHandler.ts"],"sourcesContent":["// src/utils/ICCSetupHandler.ts\r\n// Utility functions for handling ICC setups across dashboards\r\n\r\nexport interface ICCSetup {\r\n  id: string;\r\n  symbol: string;\r\n  tag: string;\r\n  timeBlock: string;   // e.g. \"pre-market\", \"regular\", \"after-hours\"\r\n  score?: number;      // optional scoring metric\r\n  malformed?: boolean; // flag for malformed setups\r\n}\r\n\r\n/**\r\n * Normalize a raw setup object into a valid ICCSetup.\r\n * Ensures required fields exist and applies defaults.\r\n */\r\nexport function normalizeSetup(raw: Partial<ICCSetup>): ICCSetup {\r\n  return {\r\n    id: raw.id ?? crypto.randomUUID(),\r\n    symbol: raw.symbol?.toUpperCase() ?? \"UNKNOWN\",\r\n    tag: raw.tag ?? \"untagged\",\r\n    timeBlock: raw.timeBlock ?? \"regular\",\r\n    score: raw.score ?? 0,\r\n    malformed: raw.malformed ?? false,\r\n  };\r\n}\r\n\r\n/**\r\n * Validate a setup object.\r\n * Returns true if required fields are present and not malformed.\r\n */\r\nexport function validateSetup(setup: ICCSetup): boolean {\r\n  if (!setup.symbol || !setup.tag || !setup.timeBlock) return false;\r\n  if (setup.malformed) return false;\r\n  return true;\r\n}\r\n\r\n/**\r\n * Group setups by tag for dashboard segmentation.\r\n */\r\nexport function groupByTag(setups: ICCSetup[]): Record<string, ICCSetup[]> {\r\n  return setups.reduce((acc, setup) => {\r\n    const tag = setup.tag;\r\n    if (!acc[tag]) acc[tag] = [];\r\n    acc[tag].push(setup);\r\n    return acc;\r\n  }, {} as Record<string, ICCSetup[]>);\r\n}\r\n\r\n/**\r\n * Group setups by timeBlock for session segmentation.\r\n */\r\nexport function groupByTimeBlock(setups: ICCSetup[]): Record<string, ICCSetup[]> {\r\n  return setups.reduce((acc, setup) => {\r\n    const block = setup.timeBlock;\r\n    if (!acc[block]) acc[block] = [];\r\n    acc[block].push(setup);\r\n    return acc;\r\n  }, {} as Record<string, ICCSetup[]>);\r\n}\r\n\r\n/**\r\n * Filter setups for malformed entries.\r\n */\r\nexport function filterMalformed(setups: ICCSetup[]): ICCSetup[] {\r\n  return setups.filter(s => s.malformed);\r\n}\r\n\r\n/**\r\n * Example: route setups to dashboards by tag.\r\n */\r\nexport function routeToDashboard(setup: ICCSetup): string {\r\n  switch (setup.tag.toLowerCase()) {\r\n    case \"momentum\":\r\n      return \"MomentumEdge\";\r\n    case \"trend\":\r\n      return \"TrendEdge\";\r\n    case \"warrior\":\r\n      return \"WarriorEdge\";\r\n    default:\r\n      return \"DefaultDashboard\";\r\n  }\r\n}"],"mappings":"AAAA;AACA;;AAWA;AACA;AACA;AACA;AACA,OAAO,SAASA,cAAcA,CAACC,GAAsB,EAAY;EAAA,IAAAC,OAAA,EAAAC,qBAAA,EAAAC,WAAA,EAAAC,QAAA,EAAAC,cAAA,EAAAC,UAAA,EAAAC,cAAA;EAC/D,OAAO;IACLC,EAAE,GAAAP,OAAA,GAAED,GAAG,CAACQ,EAAE,cAAAP,OAAA,cAAAA,OAAA,GAAIQ,MAAM,CAACC,UAAU,CAAC,CAAC;IACjCC,MAAM,GAAAT,qBAAA,IAAAC,WAAA,GAAEH,GAAG,CAACW,MAAM,cAAAR,WAAA,uBAAVA,WAAA,CAAYS,WAAW,CAAC,CAAC,cAAAV,qBAAA,cAAAA,qBAAA,GAAI,SAAS;IAC9CW,GAAG,GAAAT,QAAA,GAAEJ,GAAG,CAACa,GAAG,cAAAT,QAAA,cAAAA,QAAA,GAAI,UAAU;IAC1BU,SAAS,GAAAT,cAAA,GAAEL,GAAG,CAACc,SAAS,cAAAT,cAAA,cAAAA,cAAA,GAAI,SAAS;IACrCU,KAAK,GAAAT,UAAA,GAAEN,GAAG,CAACe,KAAK,cAAAT,UAAA,cAAAA,UAAA,GAAI,CAAC;IACrBU,SAAS,GAAAT,cAAA,GAAEP,GAAG,CAACgB,SAAS,cAAAT,cAAA,cAAAA,cAAA,GAAI;EAC9B,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASU,aAAaA,CAACC,KAAe,EAAW;EACtD,IAAI,CAACA,KAAK,CAACP,MAAM,IAAI,CAACO,KAAK,CAACL,GAAG,IAAI,CAACK,KAAK,CAACJ,SAAS,EAAE,OAAO,KAAK;EACjE,IAAII,KAAK,CAACF,SAAS,EAAE,OAAO,KAAK;EACjC,OAAO,IAAI;AACb;;AAEA;AACA;AACA;AACA,OAAO,SAASG,UAAUA,CAACC,MAAkB,EAA8B;EACzE,OAAOA,MAAM,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEJ,KAAK,KAAK;IACnC,MAAML,GAAG,GAAGK,KAAK,CAACL,GAAG;IACrB,IAAI,CAACS,GAAG,CAACT,GAAG,CAAC,EAAES,GAAG,CAACT,GAAG,CAAC,GAAG,EAAE;IAC5BS,GAAG,CAACT,GAAG,CAAC,CAACU,IAAI,CAACL,KAAK,CAAC;IACpB,OAAOI,GAAG;EACZ,CAAC,EAAE,CAAC,CAA+B,CAAC;AACtC;;AAEA;AACA;AACA;AACA,OAAO,SAASE,gBAAgBA,CAACJ,MAAkB,EAA8B;EAC/E,OAAOA,MAAM,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEJ,KAAK,KAAK;IACnC,MAAMO,KAAK,GAAGP,KAAK,CAACJ,SAAS;IAC7B,IAAI,CAACQ,GAAG,CAACG,KAAK,CAAC,EAAEH,GAAG,CAACG,KAAK,CAAC,GAAG,EAAE;IAChCH,GAAG,CAACG,KAAK,CAAC,CAACF,IAAI,CAACL,KAAK,CAAC;IACtB,OAAOI,GAAG;EACZ,CAAC,EAAE,CAAC,CAA+B,CAAC;AACtC;;AAEA;AACA;AACA;AACA,OAAO,SAASI,eAAeA,CAACN,MAAkB,EAAc;EAC9D,OAAOA,MAAM,CAACO,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACZ,SAAS,CAAC;AACxC;;AAEA;AACA;AACA;AACA,OAAO,SAASa,gBAAgBA,CAACX,KAAe,EAAU;EACxD,QAAQA,KAAK,CAACL,GAAG,CAACiB,WAAW,CAAC,CAAC;IAC7B,KAAK,UAAU;MACb,OAAO,cAAc;IACvB,KAAK,OAAO;MACV,OAAO,WAAW;IACpB,KAAK,SAAS;MACZ,OAAO,aAAa;IACtB;MACE,OAAO,kBAAkB;EAC7B;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}