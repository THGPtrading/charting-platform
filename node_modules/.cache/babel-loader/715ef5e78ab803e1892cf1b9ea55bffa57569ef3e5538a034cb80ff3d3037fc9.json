{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\irajc\\\\charting-platform\\\\src\\\\components\\\\LightweightChart.tsx\",\n  _s = $RefreshSig$();\n// src/components/LightweightChart.tsx\nimport { createChart } from 'lightweight-charts';\nimport { useEffect, useRef } from 'react';\nimport { prepareSeries } from '../utils/series';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function LightweightChart({\n  setup\n}) {\n  _s();\n  const ref = useRef(null);\n  useEffect(() => {\n    if (!ref.current) return;\n    const chart = createChart(ref.current, {\n      height: 300,\n      layout: {\n        background: {\n          type: 'solid',\n          color: '#0b0e14'\n        },\n        textColor: '#d0d6e2'\n      }\n    });\n    const {\n      candles,\n      vwap\n    } = prepareSeries(setup);\n    const candleSeries = chart.addCandlestickSeries();\n    candleSeries.setData(candles);\n    const vwapSeries = chart.addLineSeries({\n      color: '#ffc107',\n      lineWidth: 2\n    });\n    vwapSeries.setData(vwap);\n\n    // session shading\n    const sessionZones = computeSessionZones(candles, setup.timeBlock);\n    sessionZones.forEach(zone => {\n      var _zone$price;\n      return chart.addPriceLine({\n        price: (_zone$price = zone.price) !== null && _zone$price !== void 0 ? _zone$price : candles[0].close,\n        color: zone.color,\n        lineWidth: 1\n      });\n    });\n\n    // ICC trigger marker\n    if (setup.priceAtTrigger) {\n      candleSeries.createPriceLine({\n        price: setup.priceAtTrigger,\n        color: '#00e676',\n        lineStyle: 2,\n        axisLabelVisible: true,\n        title: 'Trigger'\n      });\n    }\n    const handle = () => chart.remove();\n    return handle;\n  }, [setup]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 10\n  }, this);\n}\n\n// src/utils/sessions.ts\n_s(LightweightChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = LightweightChart;\nexport function computeSessionZones(candles, block) {\n  var _candles$;\n  const colorFor = b => b === 'Premarket' ? '#304ffe' : b === 'Open' ? '#00e5ff' : b === 'Midday' ? '#9e9e9e' : b === 'PowerHour' ? '#ff6d00' : '#7b1fa2';\n  return [{\n    price: (_candles$ = candles[0]) === null || _candles$ === void 0 ? void 0 : _candles$.close,\n    color: colorFor(block)\n  }];\n}\nvar _c;\n$RefreshReg$(_c, \"LightweightChart\");","map":{"version":3,"names":["createChart","useEffect","useRef","prepareSeries","jsxDEV","_jsxDEV","LightweightChart","setup","_s","ref","current","chart","height","layout","background","type","color","textColor","candles","vwap","candleSeries","addCandlestickSeries","setData","vwapSeries","addLineSeries","lineWidth","sessionZones","computeSessionZones","timeBlock","forEach","zone","_zone$price","addPriceLine","price","close","priceAtTrigger","createPriceLine","lineStyle","axisLabelVisible","title","handle","remove","fileName","_jsxFileName","lineNumber","columnNumber","_c","block","_candles$","colorFor","b","$RefreshReg$"],"sources":["C:/Users/irajc/charting-platform/src/components/LightweightChart.tsx"],"sourcesContent":["// src/components/LightweightChart.tsx\r\nimport { createChart } from 'lightweight-charts';\r\nimport { useEffect, useRef } from 'react';\r\nimport { prepareSeries } from '../utils/series';\r\nimport type { ICCSetup } from '../types/ICC';\r\n\r\nexport function LightweightChart({ setup }: { setup: ICCSetup }) {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!ref.current) return;\r\n    const chart = createChart(ref.current, { height: 300, layout: { background: { type: 'solid', color: '#0b0e14' }, textColor: '#d0d6e2' } });\r\n    const { candles, vwap } = prepareSeries(setup);\r\n\r\n    const candleSeries = chart.addCandlestickSeries();\r\n    candleSeries.setData(candles);\r\n\r\n    const vwapSeries = chart.addLineSeries({ color: '#ffc107', lineWidth: 2 });\r\n    vwapSeries.setData(vwap);\r\n\r\n    // session shading\r\n    const sessionZones = computeSessionZones(candles, setup.timeBlock);\r\n    sessionZones.forEach(zone => chart.addPriceLine({ price: zone.price ?? candles[0].close, color: zone.color, lineWidth: 1 }));\r\n\r\n    // ICC trigger marker\r\n    if (setup.priceAtTrigger) {\r\n      candleSeries.createPriceLine({ price: setup.priceAtTrigger, color: '#00e676', lineStyle: 2, axisLabelVisible: true, title: 'Trigger' });\r\n    }\r\n\r\n    const handle = () => chart.remove();\r\n    return handle;\r\n  }, [setup]);\r\n\r\n  return <div ref={ref} />;\r\n}\r\n\r\n// src/utils/sessions.ts\r\nexport function computeSessionZones(candles: Array<{ time: number; close: number }>, block: string) {\r\n  const colorFor = (b: string) => b === 'Premarket' ? '#304ffe' : b === 'Open' ? '#00e5ff' : b === 'Midday' ? '#9e9e9e' : b === 'PowerHour' ? '#ff6d00' : '#7b1fa2';\r\n  return [{ price: candles[0]?.close, color: colorFor(block) }];\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}