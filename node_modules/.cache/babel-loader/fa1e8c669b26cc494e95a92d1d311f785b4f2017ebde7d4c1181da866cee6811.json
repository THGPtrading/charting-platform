{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\irajc\\\\charting-platform\\\\src\\\\LightweightChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { createChart, CrosshairMode, LineStyle } from 'lightweight-charts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LightweightChart = ({\n  symbol = 'AAPL',\n  timeframe = '5m',\n  data = [],\n  overlays = [],\n  tags = [],\n  priceAtTrigger = null,\n  outcome = '',\n  bot = false,\n  timeBlock = ''\n}) => {\n  _s();\n  const chartContainerRef = useRef();\n  useEffect(() => {\n    const chart = createChart(chartContainerRef.current, {\n      width: chartContainerRef.current.clientWidth || 800,\n      height: 400,\n      layout: {\n        backgroundColor: '#0e0e0e',\n        textColor: '#ccc'\n      },\n      grid: {\n        vertLines: {\n          color: 'transparent'\n        },\n        horLines: {\n          color: 'transparent'\n        }\n      },\n      crosshair: {\n        mode: CrosshairMode.Normal\n      },\n      timeScale: {\n        borderColor: '#444'\n      }\n    });\n    const series = chart.addLineSeries({\n      color: '#00bfff',\n      lineWidth: 2,\n      lineStyle: LineStyle.Solid\n    });\n\n    // âœ… Sort and deduplicate chart data\n    const safeData = Array.isArray(data) ? [...data] : [];\n    safeData.sort((a, b) => {\n      const tA = typeof a.time === 'string' ? new Date(a.time).getTime() : a.time;\n      const tB = typeof b.time === 'string' ? new Date(b.time).getTime() : b.time;\n      return tA - tB;\n    });\n    const dedupedData = safeData.filter((point, index, arr) => {\n      return index === 0 || point.time !== arr[index - 1].time;\n    });\n    if (dedupedData.length > 0) {\n      series.setData(dedupedData);\n    }\n\n    // ðŸ·ï¸ ICC Tag awareness\n    if (tags.length > 0) {\n      console.log(`Chart tags: ${tags.join(', ')}`);\n    }\n\n    // ðŸŽ¯ ICC Trigger Marker\n    if (priceAtTrigger) {\n      var _dedupedData$;\n      series.setMarkers([{\n        time: ((_dedupedData$ = dedupedData[0]) === null || _dedupedData$ === void 0 ? void 0 : _dedupedData$.time) || '2025-11-11',\n        position: 'aboveBar',\n        color: outcome === 'Scored' ? 'green' : 'orange',\n        shape: 'arrowDown',\n        text: `Trigger @ ${priceAtTrigger}`\n      }]);\n    }\n\n    // ðŸ•’ Dynamic session zone shading\n    const sessionColorMap = {\n      PreMarket: '#f5e9c5',\n      AfterHours: '#cce6ff'\n    };\n    const sessionColor = sessionColorMap[timeBlock] || null;\n    if (sessionColor && dedupedData.length > 0) {\n      chart.addLineSeries({\n        color: sessionColor,\n        lineWidth: 1,\n        priceLineVisible: false\n      }).setData([{\n        time: dedupedData[0].time,\n        value: priceAtTrigger || dedupedData[0].value || 100\n      }]);\n    }\n\n    // ðŸ“Š VWAP overlay (simulated)\n    if (overlays.includes('VWAP') && dedupedData.length > 0) {\n      const vwapSeries = chart.addLineSeries({\n        color: '#ffcc00',\n        lineWidth: 1,\n        lineStyle: LineStyle.Dotted\n      });\n      const vwapData = dedupedData.map(point => ({\n        time: point.time,\n        value: point.value * 0.98\n      }));\n      vwapSeries.setData(vwapData);\n    }\n\n    // ðŸ–¥ï¸ Responsive resize\n    const handleResize = () => {\n      chart.resize(chartContainerRef.current.clientWidth || 800, 400);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      chart.remove();\n    };\n  }, [symbol, timeframe, data, overlays, tags, priceAtTrigger, outcome, bot, timeBlock]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        color: '#ccc',\n        marginBottom: '0.5rem'\n      },\n      children: [symbol, \" \\u2014 \", timeframe, \" Chart \", bot ? '(Bot)' : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chartContainerRef,\n      style: {\n        width: '100%',\n        height: '400px',\n        padding: '1rem',\n        boxSizing: 'border-box',\n        overflow: 'hidden',\n        border: '1px solid #333',\n        borderRadius: '6px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(LightweightChart, \"ZI1LdXO604IZpmh0kAttG3FSLiA=\");\n_c = LightweightChart;\nexport default LightweightChart;\nvar _c;\n$RefreshReg$(_c, \"LightweightChart\");","map":{"version":3,"names":["React","useEffect","useRef","createChart","CrosshairMode","LineStyle","jsxDEV","_jsxDEV","LightweightChart","symbol","timeframe","data","overlays","tags","priceAtTrigger","outcome","bot","timeBlock","_s","chartContainerRef","chart","current","width","clientWidth","height","layout","backgroundColor","textColor","grid","vertLines","color","horLines","crosshair","mode","Normal","timeScale","borderColor","series","addLineSeries","lineWidth","lineStyle","Solid","safeData","Array","isArray","sort","a","b","tA","time","Date","getTime","tB","dedupedData","filter","point","index","arr","length","setData","console","log","join","_dedupedData$","setMarkers","position","shape","text","sessionColorMap","PreMarket","AfterHours","sessionColor","priceLineVisible","value","includes","vwapSeries","Dotted","vwapData","map","handleResize","resize","window","addEventListener","removeEventListener","remove","children","style","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","ref","padding","boxSizing","overflow","border","borderRadius","_c","$RefreshReg$"],"sources":["C:/Users/irajc/charting-platform/src/LightweightChart.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport {\r\n  createChart,\r\n  CrosshairMode,\r\n  LineStyle\r\n} from 'lightweight-charts';\r\n\r\nconst LightweightChart = ({\r\n  symbol = 'AAPL',\r\n  timeframe = '5m',\r\n  data = [],\r\n  overlays = [],\r\n  tags = [],\r\n  priceAtTrigger = null,\r\n  outcome = '',\r\n  bot = false,\r\n  timeBlock = '',\r\n}) => {\r\n  const chartContainerRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth || 800,\r\n      height: 400,\r\n      layout: {\r\n        backgroundColor: '#0e0e0e',\r\n        textColor: '#ccc',\r\n      },\r\n      grid: {\r\n        vertLines: { color: 'transparent' },\r\n        horLines: { color: 'transparent' },\r\n      },\r\n      crosshair: {\r\n        mode: CrosshairMode.Normal,\r\n      },\r\n      timeScale: {\r\n        borderColor: '#444',\r\n      },\r\n    });\r\n\r\n    const series = chart.addLineSeries({\r\n      color: '#00bfff',\r\n      lineWidth: 2,\r\n      lineStyle: LineStyle.Solid,\r\n    });\r\n\r\n    // âœ… Sort and deduplicate chart data\r\n    const safeData = Array.isArray(data) ? [...data] : [];\r\n    safeData.sort((a, b) => {\r\n      const tA = typeof a.time === 'string' ? new Date(a.time).getTime() : a.time;\r\n      const tB = typeof b.time === 'string' ? new Date(b.time).getTime() : b.time;\r\n      return tA - tB;\r\n    });\r\n\r\n    const dedupedData = safeData.filter((point, index, arr) => {\r\n      return index === 0 || point.time !== arr[index - 1].time;\r\n    });\r\n\r\n    if (dedupedData.length > 0) {\r\n      series.setData(dedupedData);\r\n    }\r\n\r\n    // ðŸ·ï¸ ICC Tag awareness\r\n    if (tags.length > 0) {\r\n      console.log(`Chart tags: ${tags.join(', ')}`);\r\n    }\r\n\r\n    // ðŸŽ¯ ICC Trigger Marker\r\n    if (priceAtTrigger) {\r\n      series.setMarkers([\r\n        {\r\n          time: dedupedData[0]?.time || '2025-11-11',\r\n          position: 'aboveBar',\r\n          color: outcome === 'Scored' ? 'green' : 'orange',\r\n          shape: 'arrowDown',\r\n          text: `Trigger @ ${priceAtTrigger}`,\r\n        },\r\n      ]);\r\n    }\r\n\r\n    // ðŸ•’ Dynamic session zone shading\r\n    const sessionColorMap = {\r\n      PreMarket: '#f5e9c5',\r\n      AfterHours: '#cce6ff',\r\n    };\r\n    const sessionColor = sessionColorMap[timeBlock] || null;\r\n\r\n    if (sessionColor && dedupedData.length > 0) {\r\n      chart.addLineSeries({\r\n        color: sessionColor,\r\n        lineWidth: 1,\r\n        priceLineVisible: false,\r\n      }).setData([\r\n        {\r\n          time: dedupedData[0].time,\r\n          value: priceAtTrigger || dedupedData[0].value || 100,\r\n        },\r\n      ]);\r\n    }\r\n\r\n    // ðŸ“Š VWAP overlay (simulated)\r\n    if (overlays.includes('VWAP') && dedupedData.length > 0) {\r\n      const vwapSeries = chart.addLineSeries({\r\n        color: '#ffcc00',\r\n        lineWidth: 1,\r\n        lineStyle: LineStyle.Dotted,\r\n      });\r\n\r\n      const vwapData = dedupedData.map((point) => ({\r\n        time: point.time,\r\n        value: point.value * 0.98,\r\n      }));\r\n\r\n      vwapSeries.setData(vwapData);\r\n    }\r\n\r\n    // ðŸ–¥ï¸ Responsive resize\r\n    const handleResize = () => {\r\n      chart.resize(chartContainerRef.current.clientWidth || 800, 400);\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      chart.remove();\r\n    };\r\n  }, [symbol, timeframe, data, overlays, tags, priceAtTrigger, outcome, bot, timeBlock]);\r\n\r\n  return (\r\n    <div>\r\n      <h3 style={{ color: '#ccc', marginBottom: '0.5rem' }}>\r\n        {symbol} â€” {timeframe} Chart {bot ? '(Bot)' : ''}\r\n      </h3>\r\n      <div\r\n        ref={chartContainerRef}\r\n        style={{\r\n          width: '100%',\r\n          height: '400px',\r\n          padding: '1rem',\r\n          boxSizing: 'border-box',\r\n          overflow: 'hidden',\r\n          border: '1px solid #333',\r\n          borderRadius: '6px',\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LightweightChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}