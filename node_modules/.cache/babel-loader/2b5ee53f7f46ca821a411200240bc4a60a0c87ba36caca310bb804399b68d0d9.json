{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\irajc\\\\charting-platform\\\\src\\\\components\\\\LightweightChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { createChart } from 'lightweight-charts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LightweightChart = ({\n  data,\n  overlays\n}) => {\n  _s();\n  const chartContainerRef = useRef(null);\n  const chartRef = useRef(null);\n  useEffect(() => {\n    if (!chartContainerRef.current) return;\n\n    // Clean up any existing chart before creating a new one\n    if (chartRef.current) {\n      chartRef.current.remove();\n      chartRef.current = null;\n    }\n    const chart = createChart(chartContainerRef.current, {\n      width: chartContainerRef.current.clientWidth || 600,\n      height: 400,\n      layout: {\n        background: {\n          color: '#ffffff'\n        },\n        textColor: '#000'\n      },\n      grid: {\n        vertLines: {\n          color: '#eee'\n        },\n        horzLines: {\n          color: '#eee'\n        }\n      },\n      timeScale: {\n        borderColor: '#000',\n        timeVisible: true,\n        secondsVisible: true\n      },\n      rightPriceScale: {\n        borderColor: '#000'\n      }\n    });\n    const lineSeries = chart.addLineSeries();\n    const formattedData = data.map(d => ({\n      time: typeof d.time === 'number' ? d.time : Math.floor(new Date(d.time).getTime() / 1000),\n      value: d.value\n    }));\n    lineSeries.setData(formattedData);\n    if (overlays !== null && overlays !== void 0 && overlays.triggers) {\n      lineSeries.setMarkers(overlays.triggers.map(trigger => ({\n        time: Math.floor(new Date(trigger.timestamp).getTime() / 1000),\n        position: 'aboveBar',\n        color: 'red',\n        shape: 'arrowUp',\n        text: trigger.iccTags.join(',')\n      })));\n    }\n    chartRef.current = chart;\n    return () => {\n      chart.remove();\n      chartRef.current = null;\n    };\n  }, [data, overlays]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: chartContainerRef,\n    style: {\n      width: '100%',\n      height: '400px',\n      border: '3px solid #a78bfa',\n      // lavender border\n      background: 'linear-gradient(to bottom, #d9f99d 40px, #ffffff 40px)'\n      // ✅ soft green strip at top for time axis area\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(LightweightChart, \"2rN9armGVJ1f+QeW0pB7tlSVqXQ=\");\n_c = LightweightChart;\nexport default LightweightChart;\nvar _c;\n$RefreshReg$(_c, \"LightweightChart\");","map":{"version":3,"names":["React","useEffect","useRef","createChart","jsxDEV","_jsxDEV","LightweightChart","data","overlays","_s","chartContainerRef","chartRef","current","remove","chart","width","clientWidth","height","layout","background","color","textColor","grid","vertLines","horzLines","timeScale","borderColor","timeVisible","secondsVisible","rightPriceScale","lineSeries","addLineSeries","formattedData","map","d","time","Math","floor","Date","getTime","value","setData","triggers","setMarkers","trigger","timestamp","position","shape","text","iccTags","join","ref","style","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/irajc/charting-platform/src/components/LightweightChart.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { createChart, IChartApi, LineData, Time } from 'lightweight-charts';\r\nimport type { ICCSetup } from '../types/ICC';\r\n\r\ninterface LightweightChartProps {\r\n  data: { time: number | string; value: number }[];\r\n  overlays?: {\r\n    vwap?: boolean;\r\n    sessionZones?: boolean;\r\n    triggers?: ICCSetup[];\r\n  };\r\n}\r\n\r\nconst LightweightChart: React.FC<LightweightChartProps> = ({ data, overlays }) => {\r\n  const chartContainerRef = useRef<HTMLDivElement>(null);\r\n  const chartRef = useRef<IChartApi | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!chartContainerRef.current) return;\r\n\r\n    // Clean up any existing chart before creating a new one\r\n    if (chartRef.current) {\r\n      chartRef.current.remove();\r\n      chartRef.current = null;\r\n    }\r\n\r\n    const chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth || 600,\r\n      height: 400,\r\n      layout: { background: { color: '#ffffff' }, textColor: '#000' },\r\n      grid: { vertLines: { color: '#eee' }, horzLines: { color: '#eee' } },\r\n      timeScale: {\r\n        borderColor: '#000',\r\n        timeVisible: true,\r\n        secondsVisible: true,\r\n      },\r\n      rightPriceScale: {\r\n        borderColor: '#000',\r\n      },\r\n    });\r\n\r\n    const lineSeries = chart.addLineSeries();\r\n\r\n    const formattedData: LineData[] = data.map(d => ({\r\n      time:\r\n        typeof d.time === 'number'\r\n          ? (d.time as Time)\r\n          : (Math.floor(new Date(d.time).getTime() / 1000) as Time),\r\n      value: d.value,\r\n    }));\r\n    lineSeries.setData(formattedData);\r\n\r\n    if (overlays?.triggers) {\r\n      lineSeries.setMarkers(\r\n        overlays.triggers.map(trigger => ({\r\n          time: Math.floor(new Date(trigger.timestamp).getTime() / 1000) as Time,\r\n          position: 'aboveBar',\r\n          color: 'red',\r\n          shape: 'arrowUp',\r\n          text: trigger.iccTags.join(','),\r\n        }))\r\n      );\r\n    }\r\n\r\n    chartRef.current = chart;\r\n\r\n    return () => {\r\n      chart.remove();\r\n      chartRef.current = null;\r\n    };\r\n  }, [data, overlays]);\r\n\r\n  return (\r\n    <div\r\n      ref={chartContainerRef}\r\n      style={{\r\n        width: '100%',\r\n        height: '400px',\r\n        border: '3px solid #a78bfa', // lavender border\r\n        background: 'linear-gradient(to bottom, #d9f99d 40px, #ffffff 40px)', \r\n        // ✅ soft green strip at top for time axis area\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LightweightChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}